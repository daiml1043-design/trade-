<!DOCTYPE html>
<html>
<head>
  <title>Dummy Trading Web</title>
  <style>
    body {
      font-family: Arial;
      background: url('https://images.unsplash.com/photo-1612832020590-458c267a0f5a?auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
      background-size: cover;
      color: white;
      text-align: center;
    }
    input { margin: 5px; padding: 8px; width: 200px; }
    button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    #createDiv, #dashboard { display: none; }
    #signals { margin-top: 20px; font-size: 20px; }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <h1>Dummy Trading Web</h1>

  <!-- Login Form -->
  <div id="loginDiv">
    <input type="text" id="loginName" placeholder="Name or Account"><br>
    <input type="password" id="loginPassword" placeholder="Password"><br>
    <button onclick="login()">Login</button>
    <button onclick="showCreateAccount()">Create New Account</button>
  </div>

  <!-- Create Account Form -->
  <div id="createDiv">
    <input type="text" id="newName" placeholder="Name"><br>
    <input type="password" id="newPassword" placeholder="Password"><br>
    <input type="text" id="accountNumber" placeholder="Account Number"><br>
    <input type="text" id="otp" placeholder="OTP (9999)"><br>
    <button onclick="createAccount()">Create Account</button>
    <button onclick="showLogin()">Back to Login</button>
  </div>

  <!-- Dashboard -->
  <div id="dashboard">
    <h2>Welcome, <span id="userDisplay"></span></h2>
    <h3>Live Signals</h3>
    <div id="signals">Loading signals...</div>
    <h3>Deposit Money (UPI)</h3>
    <input type="number" id="upiAmount" placeholder="Amount"><br>
    <button onclick="simulateUPI()">Pay via UPI</button><br>
    <button onclick="logout()">Logout</button>
  </div>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyDGdH6XkMXh6pfqgsUx83L-mj8gdHNES90",
      authDomain: "application-b9db7.firebaseapp.com",
      databaseURL: "https://application-b9db7-default-rtdb.firebaseio.com",
      projectId: "application-b9db7",
      storageBucket: "application-b9db7.appspot.com",
      messagingSenderId: "599892319079",
      appId: "1:599892319079:web:0741a03df8ab21633b2dc2",
      measurementId: "G-ZQ6749L2HJ"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Show/hide forms
    function showCreateAccount() {
      document.getElementById("loginDiv").style.display = "none";
      document.getElementById("createDiv").style.display = "block";
    }
    function showLogin() {
      document.getElementById("createDiv").style.display = "none";
      document.getElementById("loginDiv").style.display = "block";
    }

    // Create account
    function createAccount() {
      const name = document.getElementById("newName").value;
      const password = document.getElementById("newPassword").value;
      const accNumber = document.getElementById("accountNumber").value;
      const otp = document.getElementById("otp").value;

      if (!name || !password || !accNumber || otp !== "9999") {
        alert("All fields required and OTP must be 9999");
        return;
      }

      database.ref("users/" + accNumber).set({
        name: name,
        password: password,
        accountNumber: accNumber
      }).then(() => {
        alert("Account Created!");
        showLogin();
      });
    }

    // Login (name or account)
    function login() {
      const loginValue = document.getElementById("loginName").value;
      const password = document.getElementById("loginPassword").value;

      database.ref("users").get().then(snapshot => {
        let loggedIn = false;
        snapshot.forEach(userSnap => {
          const user = userSnap.val();
          if ((user.name === loginValue || user.accountNumber === loginValue) && user.password === password) {
            loggedIn = true;
            document.getElementById("userDisplay").innerText = user.name;
            document.getElementById("loginDiv").style.display = "none";
            document.getElementById("dashboard").style.display = "block";
            startSignals();
          }
        });
        if (!loggedIn) alert("Invalid credentials");
      });
    }

    // Live signals simulation
    function startSignals() {
      const signalText = document.getElementById("signals");
      setInterval(() => {
        const signals = ["BUY BTC", "SELL ETH", "HOLD XRP", "BUY DOGE"];
        signalText.innerText = signals[Math.floor(Math.random() * signals.length)] + " at " + new Date().toLocaleTimeString();
      }, 2000);
    }

    // UPI simulation
    function simulateUPI() {
      const amount = document.getElementById("upiAmount").value;
      if (!amount) return alert("Enter amount");
      alert("UPI Payment of â‚¹" + amount + " successful (simulation)");
    }

    // Logout
    function logout() {
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("loginDiv").style.display = "block";
    }
  </script>
</body>
</html>
